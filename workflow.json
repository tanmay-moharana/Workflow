{
  "name": "YouTube Shorts Auto-Clipper (Form Input)",
  "nodes": [
    {
      "parameters": {
        "httpMethod": "GET",
        "path": "youtube-form",
        "responseMode": "lastNode",
        "options": {}
      },
      "id": "1",
      "name": "Webhook Form (GET)",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [250, 200],
      "webhookId": "form-get"
    },
    {
      "parameters": {
        "httpMethod": "POST",
        "path": "youtube-form",
        "responseMode": "lastNode",
        "options": {}
      },
      "id": "2",
      "name": "Webhook Form (POST)",
      "type": "n8n-nodes-base.webhook",
      "typeVersion": 1,
      "position": [250, 400],
      "webhookId": "form-post"
    },
    {
      "parameters": {
        "functionCode": "return [{ json: { html: `<html><body><h1>Submit YouTube URL</h1><form method='POST' action='/webhook/youtube-form'><input type='text' name='video_url' placeholder='Paste YouTube URL here' style='width:300px'/><br/><br/><input type='submit' value='Submit'/></form></body></html>` } }];"
      },
      "id": "3",
      "name": "Return HTML Form",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [500, 200]
    },
    {
      "parameters": {
        "command": "yt-dlp --output '/data/video.mp4' {{$json[\"body\"][\"video_url\"]}}"
      },
      "id": "4",
      "name": "Download Video (yt-dlp)",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [500, 400]
    },
    {
      "parameters": {
        "authentication": "serviceAccount",
        "resource": "videos",
        "operation": "annotate",
        "videoPath": "/data/video.mp4"
      },
      "id": "5",
      "name": "Google Video Intelligence",
      "type": "n8n-nodes-base.googleCloudVideoIntelligence",
      "typeVersion": 1,
      "position": [750, 400],
      "credentials": {
        "googleApi": "Google Service Account"
      }
    },
    {
      "parameters": {
        "functionCode": "return [{ json: { scenes: items[0].json.annotationResults[0].shotAnnotations.slice(0,3) } }];"
      },
      "id": "6",
      "name": "Select Top Scenes",
      "type": "n8n-nodes-base.function",
      "typeVersion": 1,
      "position": [1000, 400]
    },
    {
      "parameters": {
        "command": "ffmpeg -i /data/video.mp4 -ss {{$json[\"scenes\"][0].startTimeOffset}} -to {{$json[\"scenes\"][0].endTimeOffset}} -c copy /data/clip1.mp4"
      },
      "id": "7",
      "name": "Clip Scene 1 (FFmpeg)",
      "type": "n8n-nodes-base.executeCommand",
      "typeVersion": 1,
      "position": [1250, 400]
    },
    {
      "parameters": {
        "video": "/data/clip1.mp4",
        "title": "Best Moment from Video",
        "description": "Automatically clipped best moment from original video.",
        "categoryId": "24",
        "privacyStatus": "public"
      },
      "id": "8",
      "name": "Upload to YouTube",
      "type": "n8n-nodes-base.youtube",
      "typeVersion": 1,
      "position": [1500, 400],
      "credentials": {
        "youtubeOAuth2Api": "YouTube OAuth"
      }
    }
  ],
  "connections": {
    "Webhook Form (GET)": {
      "main": [
        [
          { "node": "Return HTML Form", "type": "main", "index": 0 }
        ]
      ]
    },
    "Webhook Form (POST)": {
      "main": [
        [
          { "node": "Download Video (yt-dlp)", "type": "main", "index": 0 }
        ]
      ]
    },
    "Download Video (yt-dlp)": {
      "main": [
        [
          { "node": "Google Video Intelligence", "type": "main", "index": 0 }
        ]
      ]
    },
    "Google Video Intelligence": {
      "main": [
        [
          { "node": "Select Top Scenes", "type": "main", "index": 0 }
        ]
      ]
    },
    "Select Top Scenes": {
      "main": [
        [
          { "node": "Clip Scene 1 (FFmpeg)", "type": "main", "index": 0 }
        ]
      ]
    },
    "Clip Scene 1 (FFmpeg)": {
      "main": [
        [
          { "node": "Upload to YouTube", "type": "main", "index": 0 }
        ]
      ]
    }
  },
  "active": false
}
